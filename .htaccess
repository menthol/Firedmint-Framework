# Don't show directory listings for URLs which map to a directory.
Options -Indexes

# Follow symbolic links in this directory.
Options +FollowSymLinks

# Make Firedmint handle any 404 errors.
ErrorDocument 404 /index.php

# Make a error output on any 500 errors.
ErrorDocument 500 "<html><head><title>500 Application Error</title></head><body><h1>Application Error</h1><p>The Firedmint application could not be launched.</p></body></html>"

# Set the default handler.
DirectoryIndex index.php

<IfModule mod_php5.c>
  php_value magic_quotes_gpc        0
  php_value magic_quotes_runtime    0
  php_value magic_quotes_sybase     0
  php_value register_globals        0
  php_value session.auto_start      0
  php_value default_charset         "utf-8"
</IfModule>

# Various rewrite rules.
<IfModule mod_rewrite.c>
  RewriteEngine                      on
  
  # Set flag so we know URL rewriting is available
  SetEnv FM_REWRITEURLS              1

  #RewriteBase /

  # Protect system files from being viewed
  RewriteRule ^(core/|var/private/|var/log/|public/private/) - [F,L]
  RewriteRule ^site/[^\/]*/(extension/[^\/]*/)?(auth|class|component|controller|db|element|form|model|task|view)/ - [F,L]
  
  # Only alow public directories to be public on templates directories
  RewriteRule ^site/[^\/]*/template/[^\/]*/public/ - [S=1]
  RewriteRule ^site/[^\/]*/template/[^\/]*/.{2,} - [F,L]
  
  
  # Rewrite URLs of the form 'x' to the form 'index.php/x'.
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^(.*)$ index.php/$1 [L,QSA]
</IfModule>

